var temporizador, contador = 0, correctas = 0, incorrectas = 0, sinContestar = 0, porcentajeAvanzado = 100 / preguntasObjeto.length, porcentajeHecho = porcentajeAvanzado; const totalTime = 60; function iniciarScript() { ocultarElemento("final"), siguientePregunta() } function siguientePregunta() { if (ocultarElemento("answer-block"), ocultarElemento("mensaje"), ocultarElemento("boton"), contador == preguntasObjeto.length) ejecutarFinalTest(); else { mostrarEnNavegador("<p class='fade-in'>" + preguntasObjeto[contador].pregunta + "</p>", "pregunta"); for (var e = "", t = 0; t < respuestasObjeto.length; t++)respuestasObjeto[t].idPregunta == preguntasObjeto[contador].id && (e += "<p><button type='button'class='btn btn-outline-secondary btn-lg btn-block quiz-text-button fade-in' id=" + respuestasObjeto[t].idRespuesta + " onclick='comprobarRespuesta(&#34;" + respuestasCorrectasObjeto[contador].idRespuesta + "&#34;,&#34;" + respuestasObjeto[t].idRespuesta + "&#34;)'>" + respuestasObjeto[t].respuesta + "</button></p>"); mostrarEnNavegador(e, "respuesta"), document.getElementById("progress-bar").style.width = porcentajeHecho + "%", porcentajeHecho += porcentajeAvanzado, ajustarAltura(), iniciarCuentaAtras() } contador++ } function mostrarEnNavegador(e, t) { e = (e = JSON.stringify(e)).replace(/\"/g, ""), document.getElementById(t).innerHTML = e } function ejecutarFinalTest() { document.getElementById("final").classList.remove("d-none"), document.getElementById("aciertos").innerHTML = correctas, document.getElementById("fallos").innerHTML = incorrectas, document.getElementById("sinContestar").innerHTML = sinContestar, ocultarElemento("head"), ocultarElemento("quiz"), mostrarElemento("final", "flex"), ajustarAltura() } function comprobarRespuesta(e, t) { quitarColoresAnswerBlock(), pararCuentaAtras(), e == t ? (document.getElementById(t).classList.remove("btn-outline-secondary"), document.getElementById(t).classList.add("btn-success"), mostrarAnswerBlock("success"), correctas++) : (document.getElementById(t).classList.remove("btn-outline-secondary"), document.getElementById(t).classList.add("btn-danger"), document.getElementById(e).classList.remove("btn-outline-secondary"), document.getElementById(e).classList.add("btn-success"), mostrarAnswerBlock("error"), incorrectas++), deshabilitarBotones("respuesta") } function mostrarAnswerBlock(e) { var t = " "; switch (e) { case "success": t = "<p class='success'><i class='fas fa-check-circle'></i>La respuesta es correcta</p>", document.getElementById("button-next").classList.add("success-bg"), document.getElementById("answer-block").classList.add("success-bg-light"); break; case "error": t = "<p class='error'><i class='fas fa-times-circle'></i>La respuesta es incorrecta</p>", document.getElementById("button-next").classList.add("error-bg"), document.getElementById("answer-block").classList.add("error-bg-light"); break; case "timeOut": t = "<p class='text-secondary'><i class='fas fa-clock'></i>El tiempo ha pasado</p>", document.getElementById("button-next").classList.add("btn-secondary"), document.getElementById("answer-block").classList.add("timeOut-bg-light") }document.getElementById("mensaje").innerHTML = t, mostrarElemento("answer-block", "block"), mostrarElemento("mensaje", "block"), mostrarElemento("boton", "block") } function iniciarCuentaAtras() { var e = totalTime; document.getElementById("temporizador").classList.remove("gray-light"), document.getElementById("temporizador").classList.add("success"), actualizarCuentaAtras(e) } function actualizarCuentaAtras(e) { document.getElementById("cuentraAtras").innerHTML = e, 0 == e ? (deshabilitarBotones("respuesta"), quitarColoresAnswerBlock(), mostrarAnswerBlock("timeOut"), sinContestar++) : (e <= 15 && (document.getElementById("temporizador").classList.remove("success"), document.getElementById("temporizador").classList.add("error")), e--, temporizador = setTimeout(function () { actualizarCuentaAtras(e) }, 1e3)) } function pararCuentaAtras() { document.getElementById("temporizador").classList.remove("success"), document.getElementById("temporizador").classList.remove("error"), document.getElementById("temporizador").classList.add("gray-light"), clearTimeout(temporizador) } function deshabilitarBotones(e) { for (var t = document.getElementById(e).getElementsByTagName("*"), s = 0; s < t.length; s++)t[s].disabled = !0 } function ocultarElemento(e) { document.getElementById(e).style.display = "none" } function mostrarElemento(e, t) { document.getElementById(e).style.display = t } function quitarColoresAnswerBlock() { document.getElementById("button-next").classList.remove("success-bg", "error-bg", "btn-secondary"), document.getElementById("answer-block").classList.remove("success-bg-light", "error-bg-light", "timeOut-bg-light") } window.onload = iniciarScript;